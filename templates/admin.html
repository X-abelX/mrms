{% extends "base_admin.html" %}
{% block content %}



<div class="container">

  <div class="row">
    <div class="table-responsive text-nowrap" id="col">
      <h1 class="d-flex justify-content-center">Almacen</h1>
      <table class="table table-striped">
        <thead class="bg-light">
          <tr>
            <th>Albaran</th>
            <th>Contacto</th>
            <th>Direccion</th>
            <th>Fecha</th>
            <th>Palets</th>
            <th>Peso</th>
          </tr>
        </thead>
        <form action="/assign_employed" method="POST">
          <tbody id="palets">
            {% for row in data if row.10 == "mam" %}
            <tr>
              <td>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" onclick="toggleForm()" name="selected_palets"
                    value="{{ row.0 }}" id="flexCheckDefault">
                  <label class="form-check-label" for="flexCheckDefault">
                    {{ row.1 }}
                  </label>
                </div>
              </td>
              <td>{{ row.2 }}</td>
              <td>{{ row.3 }}</td>
              <td>{{ row.4 }}</td>
              <td>{{ row.5 }}</td>
              <td>{{ row.6 }}</td>
            </tr>
            {% endfor %}
          </tbody>
          <div class="navbar fixed-bottom bg-light" id="repartidorForm" style="display:none;">
            <div class="container d-flex justify-content-center">
              <div class="d-flex justify-content-center">
                <select name="employed" class="form-select" aria-label="Default select example">
                  <option selected>Empleados</option>
                  {% for row in dataempl %}
                  <option value="{{ row.0 }}">{{ row.2 }}</option>
                  {% endfor %}
                </select>
                <button type="submit" class="btn btn-success m-2">Asignar</button>
                <button type="button" class="btn btn-danger m-2">Devolver</button>
              </div>
            </div>
          </div>
        </form>
      </table>
    </div>
  </div>
</div>

<!--Modal-->

<div class="modal" tabindex="-1" id="modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Añadir Empleado</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <form action="/add_employed" method="POST">
          <label for="nombre" class="form-label">Nombre</label>
          <input name="nombre" class="form-control" type="text" placeholder="Abel Rosero"
            aria-label="default input example">

          <label for="contacto" class="form-label">Contacto</label>
          <input name="contacto" class="form-control" type="text" placeholder="654435132"
            aria-label="default input example">

          <label for="password" class="form-label">Contraseña</label>
          <input name="password" class="form-control" type="text" placeholder="Contraseña"
            aria-label="default input example">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button type="submit" class="btn btn-primary">Añadir</button>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" id="otro">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Añadir Empresa</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <form action="/add_company" method="POST">
          <label for="nombre" class="form-label">Nombre</label>
          <input name="nombre" class="form-control" type="text" placeholder="Nombre" aria-label="default input example">

          <label for="contacto" class="form-label">Contacto</label>
          <input name="contacto" class="form-control" type="text" placeholder="654435132"
            aria-label="default input example">
          <label for="correo" class="form-label">Correo</label>
          <input name="correo" class="form-control" type="text" placeholder="ejemplo@gmail.com"
            aria-label="default input example">
          <label for="cif" class="form-label">CIF</label>
          <input name="cif" class="form-control" type="text" placeholder="CIF" aria-label="default input example">
          <label for="password" class="form-label">Contraseña</label>
          <input name="password" class="form-control" type="text" placeholder="contraseña"
            aria-label="default input example">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button type="submit" class="btn btn-primary">Añadir</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  function toggleForm() {
    var checkboxChecked = document.querySelector('input[type="checkbox"]:checked');
    var repartidorForm = document.getElementById('repartidorForm');

    if (checkboxChecked) {
      repartidorForm.style.display = 'block';
    } else {
      repartidorForm.style.display = 'none';
    }
  }
</script>


{% endblock %}